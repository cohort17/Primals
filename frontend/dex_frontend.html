<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primals Decentralized Exchange</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is structured as a two-column dashboard with a central content area. This design was chosen to group related functionalities: swapping tokens in one section and managing liquidity in another. This clear separation of tasks prevents user confusion and makes the application intuitive to navigate. The central display for reserves and price provides a constant, easy-to-read reference for the state of the DEX. -->
    <!-- Visualization & Content Choices: The core interaction is the simulation of token swaps and liquidity provision. Simple form inputs are used for user interaction. The display of current reserves and price dynamically updates based on user actions, providing immediate feedback. A status message provides confirmation or error handling. No complex charts are needed as the core function is the input/output of token amounts. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8; /* Warm off-white */
            color: #4B4B4B;
        }
        .card {
            background-color: #FFFFFF;
            border: 1px solid #F0EAE1;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-radius: 1.5rem;
        }
        .btn-primary {
            background-color: #A08C7D; /* Muted brown */
            color: #FFFFFF;
            transition: background-color 0.3s, transform 0.2s;
            border-radius: 0.75rem;
        }
        .btn-primary:hover {
            background-color: #8A7667;
            transform: translateY(-2px);
        }
        .btn-primary:active {
            transform: translateY(0);
        }
        .input-field {
            border: 1px solid #E5DED6;
            background-color: #FFFCF9;
        }
    </style>
</head>
<body class="antialiased p-4 sm:p-8 lg:p-12">
    <div class="container mx-auto max-w-5xl">
        <div class="text-center mb-10">
            <h1 class="text-3xl font-bold text-[#A08C7D]">Primals Decentralized Exchange</h1>
            <p class="text-md text-gray-500 mt-2">Swap tokens or add liquidity to the pool.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Swap Section -->
            <div class="card p-6 sm:p-8 space-y-6">
                <h2 class="text-xl font-semibold">Swap Tokens</h2>
                <div class="space-y-4">
                    <div>
                        <label for="sell-amount" class="block text-sm font-medium text-gray-700">You sell</label>
                        <input type="number" id="sell-amount" class="mt-1 block w-full rounded-lg input-field p-3 focus:border-[#A08C7D] focus:ring focus:ring-[#A08C7D] focus:ring-opacity-50" placeholder="0.0">
                    </div>
                    <div>
                        <label for="receive-amount" class="block text-sm font-medium text-gray-700">You receive</label>
                        <input type="number" id="receive-amount" class="mt-1 block w-full rounded-lg input-field p-3" readonly>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700">Current Price:</span>
                        <span id="price-display" class="font-bold text-[#A08C7D]"></span>
                    </div>
                </div>
                <button id="swap-button" class="w-full btn-primary py-3 font-semibold text-lg">
                    Swap
                </button>
            </div>

            <!-- Liquidity Section -->
            <div class="card p-6 sm:p-8 space-y-6">
                <h2 class="text-xl font-semibold">Manage Liquidity</h2>
                <div class="space-y-4">
                    <div>
                        <label for="liquidity-a" class="block text-sm font-medium text-gray-700">Amount of Token A</label>
                        <input type="number" id="liquidity-a" class="mt-1 block w-full rounded-lg input-field p-3 focus:border-[#A08C7D] focus:ring focus:ring-[#A08C7D] focus:ring-opacity-50" placeholder="0.0">
                    </div>
                    <div>
                        <label for="liquidity-b" class="block text-sm font-medium text-gray-700">Amount of Token B</label>
                        <input type="number" id="liquidity-b" class="mt-1 block w-full rounded-lg input-field p-3 focus:border-[#A08C7D] focus:ring focus:ring-[#A08C7D] focus:ring-opacity-50" placeholder="0.0">
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700">Current Reserves:</span>
                        <div class="text-right">
                            <span id="reserve-a-display" class="font-semibold"></span>
                            <br>
                            <span id="reserve-b-display" class="font-semibold"></span>
                        </div>
                    </div>
                </div>
                <button id="add-liquidity-button" class="w-full btn-primary py-3 font-semibold text-lg">
                    Add Liquidity
                </button>
            </div>
        </div>

        <!-- Status/Feedback Area -->
        <div id="status-message" class="mt-8 text-center text-gray-600 font-medium">
            Enter amounts to get started.
        </div>
    </div>

    <script>
        let reserves = {
            'tokenA': 1000,
            'tokenB': 1000
        };
        let k = reserves.tokenA * reserves.tokenB;

        const sellAmountInput = document.getElementById('sell-amount');
        const receiveAmountInput = document.getElementById('receive-amount');
        const swapButton = document.getElementById('swap-button');
        const addLiquidityButton = document.getElementById('add-liquidity-button');
        const statusMessage = document.getElementById('status-message');

        function updateUI() {
            document.getElementById('price-display').textContent = (reserves.tokenB / reserves.tokenA).toFixed(4) + ' Token B per Token A';
            document.getElementById('reserve-a-display').textContent = `Token A: ${reserves.tokenA.toFixed(2)}`;
            document.getElementById('reserve-b-display').textContent = `Token B: ${reserves.tokenB.toFixed(2)}`;
        }

        function calculateAmountOut() {
            const amountIn = parseFloat(sellAmountInput.value);
            if (isNaN(amountIn) || amountIn <= 0) {
                receiveAmountInput.value = '';
                return;
            }
            const newReserveA = reserves.tokenA + amountIn;
            const newReserveB = k / newReserveA;
            const amountOut = reserves.tokenB - newReserveB;
            receiveAmountInput.value = amountOut.toFixed(4);
        }

        function performSwap() {
            const amountIn = parseFloat(sellAmountInput.value);
            if (isNaN(amountIn) || amountIn <= 0 || amountIn >= reserves.tokenA) {
                statusMessage.textContent = 'Invalid swap amount.';
                return;
            }

            const newReserveA = reserves.tokenA + amountIn;
            const newReserveB = k / newReserveA;
            const amountOut = reserves.tokenB - newReserveB;
            
            reserves.tokenA = newReserveA;
            reserves.tokenB = newReserveB;
            k = reserves.tokenA * reserves.tokenB;

            statusMessage.textContent = `Successfully swapped ${amountIn.toFixed(2)} Token A for ${amountOut.toFixed(4)} Token B.`;
            sellAmountInput.value = '';
            receiveAmountInput.value = '';
            updateUI();
        }

        function addLiquidity() {
            const amountA = parseFloat(document.getElementById('liquidity-a').value);
            const amountB = parseFloat(document.getElementById('liquidity-b').value);

            if (isNaN(amountA) || isNaN(amountB) || amountA <= 0 || amountB <= 0) {
                statusMessage.textContent = 'Invalid liquidity amounts.';
                return;
            }

            reserves.tokenA += amountA;
            reserves.tokenB += amountB;
            k = reserves.tokenA * reserves.tokenB;

            statusMessage.textContent = `Successfully added ${amountA.toFixed(2)} Token A and ${amountB.toFixed(2)} Token B to the pool.`;
            document.getElementById('liquidity-a').value = '';
            document.getElementById('liquidity-b').value = '';
            updateUI();
        }

        sellAmountInput.addEventListener('input', calculateAmountOut);
        swapButton.addEventListener('click', performSwap);
        addLiquidityButton.addEventListener('click', addLiquidity);

        // Initial UI update
        updateUI();
    </script>
</body>
</html>
